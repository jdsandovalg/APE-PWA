# Vercel Deployment Controls and Recommendations

This short guide explains why a commit may not immediately be in a production deployment and lists recommended project settings and workflows to make deployments predictable and auditable.

Why you might not see a commit in the live site
- Vercel deploys whatever branch is configured as production (commonly `main`). If you push to another branch (e.g. `chore/...`) it will create a Preview deployment but the production URL remains the `main` build until that branch is merged to `main`.
- If Vercel build logs show a different commit hash than expected it means the push for your change happened to a branch other than the one configured as production, or the merge/push to `main` occurred after the build started.

Recommended controls and workflow

1) Branch protections + PR-only merges
- Protect `main` in GitHub settings (require PRs, require status checks). This prevents accidental direct pushes to `main` and keeps deployments tied to reviewed merges.

2) Use Preview Deployments for PRs
- Vercel automatically creates preview deployments for each PR/branch. Use those previews to validate the change visually before merging to `main`.
- Add a note in your PR template to check the Vercel preview link.

3) CI checks before merge
- Require passing unit/build checks on PRs (GitHub Actions). A quick workflow can run `npm ci` and `npm run build` to catch build regressions and chunk-size warnings before merging.

4) Notify & audit
- Enable Vercel GitHub integration and notifications. Optionally add a Slack/Teams webhook or GitHub Action to post deploy results to your team channel.

5) Optional: Deploy hooks or manual production deploy
- Use Vercel Deploy Hooks or `vercel --prod` with a CI job for controlled production deployments from `main`.

6) Bundle size guardrails
- Add a simple check in CI to fail builds (or warn) when chunks exceed a size threshold. This prevents accidental large bundles reaching production.
- Consider lazy-loading heavy libs (e.g., `pdfjs-dist`) or moving them to manualChunks in `vite.config.ts`.

7) Reproducible builds & caching
- Keep `package-lock.json` committed and use reliable Node version in CI. Vercel caches `node_modules` between builds; clear cache in Vercel settings if builds become inconsistent.

Quick checklist to ensure a change reaches production
- Create branch → open PR → wait for preview deployment → review and merge PR into `main` → Vercel will build `main` and deploy production.

If you want, I can:
- Add a lightweight GitHub Actions workflow to run `npm ci` + `npm run build` on PRs.
- Add a PR template reminding to check the Vercel preview.
- Add a small CI step to warn on large chunk sizes.


---
Generated by the repo assistant as remediation for deployment confusion.
